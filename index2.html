<!DOCTYPE html>
<html>
<head>
  <title>Recetario BRIXTON</title>
  <link rel="stylesheet" type="text/css" href="./static/styles.css">
</head>
<body>
  <header class="barra-superior"></header>
  <nav class="button-wrapper">
    <button class="button">
      <img src="./static/info.png" alt="Descripción de la imagen" class="button-image">
    </button>
    <button class="button" onclick="handleLogout()">
      <img src="./static/logout.png" alt="Descripción de la imagen" class="button-image">
    </button>    
  </nav>
  <section class="input-section">
    <div class="input-wrapper">
      <form onsubmit="handleSubmit(event)">
        <div class="input-container">
          <input type="text" id="input-query" class="input-consulta" placeholder="Ingrese el trago a consultar" autocomplete="off">
          <button type="submit" class="enter-button"></button>
        </div>
      </form>
    </div>
    <div class="linea"></div>
    <div class="input-container">
      <form onsubmit="handleIngredientFilter(event)">
      <input type="text" id="input-ingredient" class="input-half" placeholder="Filtra por ingrediente" autocomplete="off">
      <button class="input-half-button"></button>
      </form>
      <select class="select-custom" onchange="handleSelectChange()">
        <option value="" disabled selected>Filtra por metodo</option>
        <option value="Directo">Directos</option>
        <option value="Clasico">Clasicos</option>
        <option value="Caipi">Caipis</option>
        <option value="Mojito">Mojitos</option>
        <option value="Espumante">Espumantes</option>
        <option value="Frozen">Frozen</option>
        <option value="Julep">Julep</option>
        <option value="Sour">Sour</option>
        <option value="Cremoso">Cremosos</option>
        <option value="Frutal">Frutales</option>
        <option value="Intenso">Intensos</option>
        <option value="Tiki">Tikis</option>
        <option value="Smoothie">Smoothies</option>
        <option value="Mocktail">Mocktails</option>
        <option value="Jarra">Jarras</option>
      </select>
    </div>
  </section>
</body>
</html>

<script>
  const urlParams = new URLSearchParams(window.location.search);
  const selection = urlParams.get('selection');
  
  console.log('Selection en index2:', selection); // Agregando la impresión

  function handleLogout() {
    window.location.href = 'index.html'; // Cambiar la URL según tu estructura de carpetas
  }
  
  function handleSubmit(event) {   
    event.preventDefault();
    const inputValor = document.getElementById("input-query").value;

    if (inputValor.trim() === '') {
      return;
    }

    const encodedQuery = encodeURIComponent(inputValor);
    // Agregar la variable "selection" a la URL
    window.location.href = `bueno.html?query=${encodedQuery}&selection=${encodeURIComponent(selection)}`;
  }

  function handleSelectChange() {
    const selectedOption = document.querySelector('.select-custom').value;
    if (selectedOption) {
      window.location.href = `detalle.html?select=${encodeURIComponent(selectedOption)}&selection=${encodeURIComponent(selection)}`;
    }
  }

  function handleIngredientFilter(event) {
    event.preventDefault();
    const inputIngredient = document.getElementById("input-ingredient").value.trim();
    if (inputIngredient === '') {
      return;
    }

    const encodedIngredient = encodeURIComponent(inputIngredient);
    window.location.href = `detalle.html?ingredient=${encodedIngredient}&selection=${encodeURIComponent(selection)}`;
  }
</script>


</body>
</html>
